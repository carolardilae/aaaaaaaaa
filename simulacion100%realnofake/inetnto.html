<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Example</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
        #error-message, #error-message2 {
            color: red;
            font-weight: bold;
        }
        #success-message, #success-message2 {
            color: green;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <button id="mgarra1">cerrar garra</button>
    <button id="mgarra2">abrir garra</button>
    <button id="madelante">adelante</button>
    <button id="matras">atras</button>
    <button id="mderecha">derecha</button>
    <button id="mizquierda">izquierda</button>
    <h2>Servo_1</h2>
    <input type="number" id="angleInput" placeholder="0 a 180" step="any" />
   <button id="confirmButton">Confirmar</button>
   <div id="error-message"></div>
   <div id="success-message"></div>
    <h2>Servo_2</h2>
    <input type="number" id="angleInput2" placeholder="0 a 180" step="any" />
   <button id="confirmButton2">Confirmar</button>
   <div id="error-message2"></div>
   <div id="success-message2"></div>


   <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
   <script>
    
    const scene = new THREE.Scene();

   
    const camera = new THREE.PerspectiveCamera(
        50,
        1.6991404011461317, 
        0.01, 
        1000 
    );
    camera.position.set(7.551563423531709, 8.107437688577768, 2.9369551940276635);
    camera.rotation.setFromRotationMatrix(new THREE.Matrix4().fromArray([
        0.48712946091294096, 8.326672684688674e-17, -0.8733297706540568, 0,
        -0.43605664818517026, 0.8664271305369836, -0.24322546544916554, 0,
        0.7566766072003166, 0.4993035424162827, 0.4220621810188272, 0,
        0, 0, 0, 1
    ]));

    const geometry = new THREE.CylinderGeometry(1, 1, 1, 32, 1, false, 0, 2 * Math.PI);
    const material = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x5f5f5f,
        envMapIntensity: 1
    });

    
    const geometry1 = new THREE.BoxGeometry(1, 1, 1);
    const material1 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x262626,
        envMapIntensity: 1
    });

    
    const box1 = new THREE.Mesh(geometry1, material1);
    box1.position.set(-0.3651107358407901, 1.8221887746966061, -1.3193337808195766);
    box1.scale.set(3, 8, 0.3);
    box1.rotation.x = Math.PI / 2; 
    box1.rotation.y = 0; 
    box1.rotation.z = 0; 
    scene.add(box1);

    
    const geometry2 = new THREE.BoxGeometry(1, 1, 1);
    const material2 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0xffcc55,
        envMapIntensity: 1
    });

   
    const box2 = new THREE.Mesh(geometry2, material2);
    box2.position.set(-0.28807029560611097, 2.143727031956033, -5.232787515405793);
    box2.scale.set(3, 8, 0.3);
    box2.rotation.x = Math.PI / 2; 
    box2.rotation.y = 0; 
    box2.rotation.z = 0; 
    scene.add(box2);

    
    const geometry3 = new THREE.BoxGeometry(1, 1, 1);
    const material3 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x00ff00, 
        envMapIntensity: 1
    });

    
    const box3 = new THREE.Mesh(geometry3, material3);
    box3.position.set(-0.308, 2.475, -2.510); 
    box3.scale.set(1, 2, 0.3); 
    box3.rotation.x = Math.PI / 2; 
    box3.rotation.y = 0; 
    box3.rotation.z = 0; 
    scene.add(box3);


    const geometry4 = new THREE.BoxGeometry(1, 1, 1);
    const material4 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x000D42, 
        envMapIntensity: 1
    });

    
    const raspberry2 = new THREE.Mesh(geometry3, material3);
    raspberry2.position.set(0.014, 2.449, -7.646); 
    raspberry2.scale.set(1, 2, 0.3); 
    raspberry2.rotation.x = Math.PI / 2; 
    raspberry2.rotation.y = 0; 
    raspberry2.rotation.z = 0; 
    scene.add(raspberry2);

    const bpantalla = new THREE.Mesh(geometry4, material4);
    bpantalla.position.set(0.221, 2.577, -5.151); 
    bpantalla.scale.set(1.5, 1.5, 0.3); 
    bpantalla.rotation.x = Math.PI / 2; 
    bpantalla.rotation.y = 0; 
    bpantalla.rotation.z = 0; 
    scene.add(bpantalla);

    const material5 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0xFFFFFF, 
        envMapIntensity: 1
    });

    const material6 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0xEA1A1A, // ROJO
        envMapIntensity: 1
    });

    const material7 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x7B1D95, // MORADO
        envMapIntensity: 1
    });

    const material8 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0xDE7E4A, // COMO NARANJA
        envMapIntensity: 1
    });

    const material9 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x040BD2, // AZUL LOL
        envMapIntensity: 1
    });

    const material10 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0xC7F97D, //verde clarp
        envMapIntensity: 1
    });

    const material11 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0xC7F97D, //verde clarp
        envMapIntensity: 1
    });

    const material12 = new THREE.MeshStandardMaterial({
        color: 0xffffff,
        roughness: 1,
        metalness: 0,
        emissive: 0x90FFE2, //celeste
        envMapIntensity: 1
    });

    const pantalla = new THREE.Mesh(geometry4, material5);
    pantalla.position.set(0.206, 2.732, -5.118); 
    pantalla.scale.set(1, 1.2, 0.1); 
    pantalla.rotation.x = Math.PI / 2; 
    pantalla.rotation.y = 0; 
    pantalla.rotation.z = 0; 
    scene.add(pantalla);

    const b1 = new THREE.Mesh(geometry3, material5);
    b1.position.set(0.461, 2.5, 0.464); 
    b1.scale.set(3.2, 1, 0.3);
    b1.rotation.x = 0; 
    b1.rotation.y = Math.PI / 2; 
    b1.rotation.z = 0; 
    scene.add(b1);

    const b2 = new THREE.Mesh(geometry3, material6);
    b2.position.set(-0.461, 2.5, 1.876); 
    b2.scale.set(1.5, 1, 0.3); 
    b2.rotation.x = 0; 
    b2.rotation.y = 0; 
    b2.rotation.z = Math.PI / 2; 
    scene.add(b2);

    const b3 = new THREE.Mesh(geometry3, material7);
    b3.position.set(-1.167, 2.5, 0.442); 
    b3.scale.set(3.2, 1, 0.3); 
    b3.rotation.x = 0; 
    b3.rotation.y = Math.PI / 2; 
    b3.rotation.z = 0; 
    scene.add(b3);

    const b4 = new THREE.Mesh(geometry3, material8);
    b4.position.set(-0.362, 2.5, -0.978); 
    b4.scale.set(1.3, 1, 0.3); 
    b4.rotation.x = 0; 
    b4.rotation.y = 0; 
    b4.rotation.z = Math.PI / 2; 
    scene.add(b4);

    const servo1 = new THREE.Mesh(geometry3, material9);
    servo1.position.set(0.414, 2.467, 0.3); 
    servo1.scale.set(0.7, 0.7, 1);
    servo1.rotation.x = Math.PI / 2; 
    servo1.rotation.y = 0; 
    servo1.rotation.z = 0; 
    scene.add(servo1);

    const servo2 = new THREE.Mesh(geometry3, material9);
    servo2.position.set(-1, 2.467, 0.3); 
    servo2.scale.set(0.7, 0.7, 1); 
    servo2.rotation.x = Math.PI / 2; 
    servo2.rotation.y = 0; 
    servo2.rotation.z = 0; 
    scene.add(servo2);

    const palob = new THREE.Mesh(geometry3, material8);
    palob.position.set(-0.33, 3.5, 1); 
    palob.scale.set(1.05, 3, 0.3); 
    palob.rotation.x = Math.PI / 18; 
    palob.rotation.y = 0; 
    palob.rotation.z = 0; 
    scene.add(palob);

    const palo1 = new THREE.Mesh(geometry3, material6);
    palo1.position.set(0.229, 4, -0.43); 
    palo1.scale.set(3, 0.15, 0.15); 
    palo1.rotation.x = 4 * Math.PI / 9; 
    palo1.rotation.y = Math.PI / 2; 
    palo1.rotation.z = 0; 
    scene.add(palo1);

    const palo2 = new THREE.Mesh(geometry3, material5);
    palo2.position.set(-0.229, 4, -0.43); 
    palo2.scale.set(3, 0.15, 0.15); 
    palo2.rotation.x = 4 * Math.PI / 9; 
    palo2.rotation.y = Math.PI / 2; 
    palo2.rotation.z = 0; 
    scene.add(palo2);

    const palo3 = new THREE.Mesh(geometry3, material7);
    palo3.position.set(0.261, 4.687, 1.215); 
    palo3.scale.set(4.5, 0.15, 0.15); 
    palo3.rotation.x = Math.PI / 12; 
    palo3.rotation.y = 87 * Math.PI / 180; 
    palo3.rotation.z = 0; 
    scene.add(palo3);

    const palo4 = new THREE.Mesh(geometry3, material2);
    palo4.position.set(-0.962, 4.687, 1.215); 
    palo4.scale.set(4.5, 0.15, 0.15);
    palo4.rotation.x = Math.PI / 12; 
    palo4.rotation.y = 87 * Math.PI / 180; 
    palo4.rotation.z = 0; 
    scene.add(palo4);

    const bgarra = new THREE.Mesh(geometry3, material1);
    bgarra.position.set(-0.34, 4.0, 3.5); 
    bgarra.scale.set(0.7, 0.5, 1); 
    bgarra.rotation.x = 0; 
    bgarra.rotation.y = 0; 
    bgarra.rotation.z = 0; 
    scene.add(bgarra);

    const garra1 = new THREE.Mesh(geometry3, material3);
    garra1.position.set(0.34, 4, 4); 
    garra1.scale.set(1.5, 0.3, 0.1); 
    garra1.rotation.x = Math.PI / 2; 
    garra1.rotation.y = 0; 
    garra1.rotation.z = 56 * Math.PI / 180; 
    scene.add(garra1);

    const garra2 = new THREE.Mesh(geometry3, material3);
    garra2.position.set(-0.34, 4, 4);
    garra2.scale.set(1.5, 0.3, 0.1);
    garra2.rotation.x = Math.PI / 2; 
    garra2.rotation.y = 0; 
    garra2.rotation.z = -56 * Math.PI / 180; 
    scene.add(garra2);

    const motor1 = new THREE.Mesh(geometry3, material8);
    motor1.position.set(0.7, 1.104, -2.8010);
    motor1.scale.set(0.7, 1, 1); 
    motor1.rotation.x = Math.PI / 2; 
    motor1.rotation.y = 0; 
    motor1.rotation.z =0; 
    scene.add(motor1);

    const rueda1 = new THREE.Mesh(geometry, material10);
    rueda1.position.set(1.68, 0.7, -3);
    rueda1.rotation.x = 0; 
    rueda1.rotation.y = 0; 
    rueda1.rotation.z =Math.PI / 2; 
    scene.add(rueda1);

    const rueda2 = new THREE.Mesh(geometry, material11);
    rueda2.position.set(-0.5, 0.7, -2);
    rueda2.rotation.x = 0; 
    rueda2.rotation.y = 0; 
    rueda2.rotation.z =Math.PI / 2; 
    scene.add(rueda2);

    const ruedal = new THREE.Mesh(geometry, material6);
    ruedal.position.set(-0.368, 0.634, 1.85);
    ruedal.rotation.x = 0; 
    ruedal.rotation.y = Math.PI / 2; 
    ruedal.rotation.z =0; 
    scene.add(ruedal);

    function validateAngle() {
        const inputAngle = document.getElementById('angleInput').value;
        const angle = parseFloat(inputAngle);
        const errorMessage = document.getElementById('error-message');
        const successMessage = document.getElementById('success-message');

        if (angle >= 0 && angle <= 180) {
            errorMessage.textContent = ''; // Limpiar mensaje de error
            successMessage.textContent = 'Ángulo válido.';
            console.log(`Ángulo válido: ${angle} grados`);
            palo1.material = material12;
            palo3.material = material12
        } else {
            successMessage.textContent = ''; // Limpiar mensaje de éxito
            errorMessage.textContent = 'Error: El ángulo debe estar entre 0 y 180 grados.';
        }
    }

    document.getElementById('confirmButton2').addEventListener('click', validateAngle);

    // Función para validar el ángulo para palo2
    function validateAngle2() {
        const inputAngle = document.getElementById('angleInput2').value;
        const angle = parseFloat(inputAngle);
        const errorMessage = document.getElementById('error-message2');
        const successMessage = document.getElementById('success-message2');

        if (angle >= 0 && angle <= 180) {
            errorMessage.textContent = ''; // Limpiar mensaje de error
            successMessage.textContent = 'Ángulo válido.';
            console.log(`Ángulo válido: ${angle} grados`);
            palo2.material = material12;
            palo4.material = material12
        } else {
            successMessage.textContent = ''; // Limpiar mensaje de éxito
            errorMessage.textContent = 'Error: El ángulo debe estar entre 0 y 180 grados.';
        }
    }

    document.getElementById('confirmButton2').addEventListener('click', validateAngle2);


  

    
    // Crear el renderer
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    document.getElementById("mgarra1").addEventListener("click", function() {
            garra1.rotation.z = Math.PI / 2;
            garra2.rotation.z = Math.PI / 2;

        });

    document.getElementById("mgarra2").addEventListener("click", function() {
        garra1.rotation.z = 56 * Math.PI / 180;
        garra2.rotation.z = -56 * Math.PI / 180;

        });

        const colorButton = document.getElementById('madelante');
        colorButton.addEventListener('click', cambiarColor);

        function cambiarColor() {
            rueda1.material.emissive.setHex(0xFA81E0);//rodao
            rueda2.material.emissive.setHex(0xFA81E0); 
        }

        const colorButton2 = document.getElementById('matras');
        colorButton2.addEventListener('click', cambiarColor2);

        function cambiarColor2() {
            rueda1.material.emissive.setHex(0x90FFAD); //verdee
            rueda2.material.emissive.setHex(0x90FFAD); 
        }

        const colorButton3 = document.getElementById('mderecha');
        colorButton3.addEventListener('click', cambiarColor3);

        function cambiarColor3() {
            rueda1.material.emissive.setHex(0xFA81E0);//rosado
            rueda2.material.emissive.setHex(0x90FFAD);//verde
        }

        const colorButton4 = document.getElementById('mizquierda');
        colorButton4.addEventListener('click', cambiarColor4);

        function cambiarColor4() {
            rueda1.material.emissive.setHex(0x90FFAD);//verde
            rueda2.material.emissive.setHex(0xFA81E0);//rosado
        }


        

    function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
    }
    animate();
   </script>
</body>
</html>
